app:
  build: Packages/Libraries/sebastianhelzle/dockerflow/
  hostname: dockerflow
  domainname: dockerflow
  volumes:
    - Packages/Libraries/sebastianhelzle/dockerflow/Configuration/php-fpm.conf:/etc/php5/fpm/php-fpm.conf:ro
    - Packages/Libraries/sebastianhelzle/dockerflow/Configuration/www.conf:/etc/php5/fpm/pool.d/www.conf:ro
    - Packages/Libraries/sebastianhelzle/dockerflow/Configuration/php.ini:/etc/php5/fpm/php.ini:ro
    - Packages/Libraries/sebastianhelzle/dockerflow/Configuration/php-cli.ini:/etc/php5/cli/php.ini:ro
  volumes_from:
    - data
  expose:
    - "9000"
  links:
    - db

data:
  image: dockerfile/mariadb:latest
  command: echo "Data container has started"
  volumes:
    - .:/var/www
    - /var/lib/mysql

db:
  image: dockerfile/mariadb:latest
  volumes_from:
    - data

web:
  image: nginx:1.7
  ports:
    - "8080:8080"
  volumes:
    - Packages/Libraries/sebastianhelzle/dockerflow/Configuration/nginx.conf:/etc/nginx/nginx.conf:ro
    - Packages/Libraries/sebastianhelzle/dockerflow/Configuration/nginx_vhost_merged.conf:/etc/nginx/conf.d/default.conf:ro
  volumes_from:
    - data
  links:
    - app
