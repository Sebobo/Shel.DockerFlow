app:
  build: Docker
  hostname: shneos
  domainname: shneos.dev
  volumes:
    - Docker/Config/php-fpm.conf:/etc/php5/fpm/php-fpm.conf
    - Docker/Config/www.conf:/etc/php5/fpm/pool.d/www.conf
    - Docker/Config/php.ini:/etc/php5/fpm/php.ini
    - Docker/Config/php-cli.ini:/etc/php5/cli/php.ini
  volumes_from:
    - data
  expose:
    - "9000"
  links:
    - db

data:
  image: busybox
  command: echo "Data container has started"
  volumes:
    - .:/code
    - /var/lib/mysql

db:
  image: dockerfile/mariadb:latest
  ports:
    - "3306:3306"
  volumes_from:
    - data

web:
  image: nginx:1.7
  ports:
    - "80:80"
  volumes:
    - Docker/Config/nginx.conf:/etc/nginx/nginx.conf:ro
    - Docker/Config/nginx_vhost.conf:/etc/nginx/conf.d/default.conf:ro
  volumes_from:
    - data
  links:
    - app
